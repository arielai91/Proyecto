<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style_usuario.css">
    <link rel="stylesheet" href="../css/style_admin.css">
    <title>Página de Administrador - APORTACIONES AEIS</title>
</head>
<body>
<nav>
    <div class="nav-left">
        <div class="logo_aeis">
        </div>
        <span class="brand-name">AEIS</span>
    </div>
    <a href="index.html" class="salir-btn">Cerrar Sesión</a>
</nav>

<main>
    <div class="sidebar">
        <div class="profile-card">
            <h3 class="admin-title">ADMINISTRADOR</h3>
            <div class="profile-container">
                <div class="profile-pic">
                    <img src="../content/logo_aeis.png" alt="Profile Picture" id="profile-image">
                </div>
                <button class="button_profile">Cambiar foto</button>
            </div>
            <div class="profile-info">
                <h3>Admin Principal</h3>
                <p>Cédula: 987654321</p>
                <p>Correo: admin@epn.edu.ec</p>
            </div>
            <button class="change-password-btn" onclick="togglePasswordModal()">Cambiar Contraseña</button>
        </div>
        <div class="menu">
            <button onclick="showPanel('solicitudes-pendientes')"><span>Solicitudes Pendientes</span></button>
            <button onclick="showPanel('solicitudes-aprobadas')"><span>Solicitudes Aprobadas</span></button>
            <button onclick="showPanel('solicitudes-rechazadas')"><span>Solicitudes Rechazadas</span></button>
            <button onclick="showPanel('crear-admin')"><span>Crear Administrador</span></button>
        </div>
    </div>

    <div class="content">
        <!-- Panel Solicitudes Pendientes -->
        <div id="solicitudes-pendientes" class="panel active">
            <h2>Solicitudes Pendientes</h2>
            <div class="solicitudes-container">
                <details class="solicitud-details" data-id="1">
                    <summary>
                        <span class="solicitud-type">Aportación</span>
                        -
                        <span class="solicitud-name">Juan Pérez</span>
                    </summary>
                    <div class="solicitud-content">
                        <p><span>Detalle:</span> Plan Premium</p>
                        <p><span>Valor:</span> $50</p>
                        <p><span>Correo:</span> juan.perez@epn.edu.ec</p>
                        <div class="comprobante-container">
                            <img src="../content/comprobante.jpg" alt="Comprobante" class="comprobante-img"
                                 onclick="expandImage(this)">
                        </div>
                        <div class="action-buttons">
                            <button class="approve-btn" onclick="showApproveModal(1, 'Juan Pérez')">Aprobar</button>
                            <button class="reject-btn" onclick="showRejectModal(1)">Rechazar</button>
                        </div>
                    </div>
                </details>

                <details class="solicitud-details" data-id="2">
                    <summary>
                        <span class="solicitud-type">Casillero</span>
                        -
                        <span class="solicitud-name">María López</span>
                    </summary>
                    <div class="solicitud-content">
                        <p><span>Detalle:</span> Casillero #15</p>
                        <p><span>Valor:</span> $8</p>
                        <p><span>Correo:</span> maria.lopez@epn.edu.ec</p>
                        <div class="comprobante-container">
                            <img src="../content/comprobante.jpg" alt="Comprobante" class="comprobante-img"
                                 onclick="expandImage(this)">
                        </div>
                        <div class="action-buttons">
                            <button class="approve-btn" onclick="showApproveModal(2, 'María López')">Aprobar</button>
                            <button class="reject-btn" onclick="showRejectModal(2)">Rechazar</button>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Panel Solicitudes Aprobadas -->
        <div id="solicitudes-aprobadas" class="panel">
            <h2>Solicitudes Aprobadas</h2>
            <div class="solicitudes-container">
                <details class="solicitud-details">
                    <summary>
                        <span class="solicitud-type">Aportación</span>
                        -
                        <span class="solicitud-name">Carlos Ruiz</span>
                        <span class="approval-date">APROBADO EN: 08/11/2024</span>
                    </summary>
                    <div class="solicitud-content">
                        <p><span>Detalle:</span> Plan Básico</p>
                        <p><span>Valor:</span> $30</p>
                        <p><span>Correo:</span> carlos.ruiz@epn.edu.ec</p>
                        <div class="comprobante-container">
                            <img src="../content/comprobante.jpg" alt="Comprobante" class="comprobante-img"
                                 onclick="expandImage(this)">
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Panel Solicitudes Rechazadas -->
        <div id="solicitudes-rechazadas" class="panel">
            <h2>Solicitudes Rechazadas</h2>
            <div class="solicitudes-container">
                <details class="solicitud-details" data-id="3">
                    <summary>
                        <span class="solicitud-type">Casillero</span>
                        -
                        <span class="solicitud-name">Ana Torres</span>
                        <span class="reject-date">RECHAZADO EN: 07/11/2024</span>
                    </summary>
                    <div class="solicitud-content">
                        <p><span>Detalle:</span> Casillero #20</p>
                        <p><span>Valor:</span> $8</p>
                        <p><span>Correo:</span> ana.torres@epn.edu.ec</p>
                        <div class="comprobante-container">
                            <img src="../content/comprobante.jpg" alt="Comprobante" class="comprobante-img"
                                 onclick="expandImage(this)">
                        </div>
                        <button class="approve-btn" onclick="showApproveModal(3, 'Ana Torres')">Aprobar</button>
                    </div>
                </details>
            </div>
        </div>

        <!-- Panel Crear Administrador -->
        <div id="crear-admin" class="panel">
            <h2>Crear Administrador</h2>
            <form class="admin-form" onsubmit="createAdmin(event)">
                <div class="form-group">
                    <label for="nombre">Nombre</label>
                    <input type="text" id="nombre" required>
                </div>
                <div class="form-group">
                    <label for="apellido">Apellido</label>
                    <input type="text" id="apellido" required>
                </div>
                <div class="form-group">
                    <label for="cedula">Cédula</label>
                    <input type="text" id="cedula" required pattern="[0-9]{10}">
                </div>
                <div class="form-group">
                    <label for="correo">Correo Institucional</label>
                    <input type="email" id="correo" required pattern=".*@epn\.edu\.ec$">
                </div>
                <div class="form-group">
                    <label for="password">Contraseña</label>
                    <input type="password" id="password" required>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirmar Contraseña</label>
                    <input type="password" id="confirm-password" required>
                </div>
                <button type="submit" class="submit-btn">Crear Administrador</button>
            </form>
        </div>
    </div>
</main>

<!-- Modal de Aprobar -->
<div id="approve-modal" class="modal">
    <div class="modal-content">
        <h2>Confirmar Aprobación</h2>
        <p>¿Está seguro que desea aprobar la solicitud de <span id="approve-user-name"></span>?</p>
        <div class="modal-buttons">
            <button onclick="approveRequest()" class="modal-btn modal-btn-primary">OK</button>
            <button onclick="closeModal('approve-modal')" class="modal-btn modal-btn-secondary">Cancelar</button>
        </div>
    </div>
</div>

<!-- Modal de Rechazar -->
<div id="reject-modal" class="modal">
    <div class="modal-content">
        <h2>Motivo de Rechazo</h2>
        <div class="form-group">
            <select id="reject-reason" required>
                <option value="">Seleccione un motivo</option>
                <option value="comprobante-falso">Comprobante falso</option>
                <option value="pago-no-efectuado">Pago no efectuado</option>
                <option value="datos-incorrectos">Datos incorrectos</option>
                <option value="comprobante-ilegible">Comprobante ilegible</option>
                <option value="otro">Otro motivo</option>
            </select>
        </div>
        <div class="modal-buttons">
            <button onclick="rejectRequest()" class="modal-btn modal-btn-primary">Rechazar</button>
            <button onclick="closeModal('reject-modal')" class="modal-btn modal-btn-secondary">Cancelar</button>
        </div>
    </div>
</div>

<!-- Modal para imagen expandida -->
<div id="image-modal" class="modal">
    <div class="modal-content image-modal-content">
        <span class="close-modal" onclick="closeModal('image-modal')">&times;</span>
        <img id="expanded-image" src="../content/comprobante.jpg" alt="Comprobante expandido">
    </div>
</div>
<footer>
    <div class="footer-content">
        <div class="copyright">
            <span>FusionCode © 2024. Todos los derechos reservados.</span>
        </div>
        <div class="address">
            <span>Dirección</span>
            <p>Av. Ladrón de Guevara 253, Quito 170517</p>
        </div>
        <div class="creators">
            <span>Created and Designed by:</span>
            <p>Ariel Amaguaña and José Merchán</p>
        </div>
    </div>
</footer>
<script type="module" src="../js/admin.js"></script>
</body>
</html>